//Navigation bar
import React, { useRef, useEffect, useState } from "react";

import './styles/navigation_bar.css';
import './styles/navigation_bar_animation.css';

const LinkedIn = <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.875 0C3.10028 0 0 3.10028 0 6.875V38.125C0 41.8997 3.10028 45 6.875 45H38.125C41.8997 45 45 41.8997 45 38.125V6.875C45 3.10028 41.8997 0 38.125 0H6.875ZM6.875 3.75H38.125C39.8728 3.75 41.25 5.12722 41.25 6.875V38.125C41.25 39.8728 39.8728 41.25 38.125 41.25H6.875C5.12722 41.25 3.75 39.8728 3.75 38.125V6.875C3.75 5.12722 5.12722 3.75 6.875 3.75ZM11.875 8.75C11.0462 8.75 10.2513 9.07924 9.66529 9.66529C9.07924 10.2513 8.75 11.0462 8.75 11.875C8.75 12.7038 9.07924 13.4987 9.66529 14.0847C10.2513 14.6708 11.0462 15 11.875 15C12.7038 15 13.4987 14.6708 14.0847 14.0847C14.6708 13.4987 15 12.7038 15 11.875C15 11.0462 14.6708 10.2513 14.0847 9.66529C13.4987 9.07924 12.7038 8.75 11.875 8.75ZM10 17.5C9.30875 17.5 8.75 18.0588 8.75 18.75V35C8.75 35.6912 9.30875 36.25 10 36.25H13.75C14.4412 36.25 15 35.6912 15 35V18.75C15 18.0588 14.4412 17.5 13.75 17.5H10ZM18.75 17.5C18.0588 17.5 17.5 18.0588 17.5 18.75V35C17.5 35.6912 18.0588 36.25 18.75 36.25H22.5C23.1912 36.25 23.75 35.6912 23.75 35V25.625C23.75 23.9013 25.1513 22.5 26.875 22.5C28.5987 22.5 30 23.9013 30 25.625V35C30 35.6912 30.5588 36.25 31.25 36.25H35C35.6912 36.25 36.25 35.6912 36.25 35V25C36.25 20.8638 32.8862 17.5 28.75 17.5C26.8275 17.5 25.0788 18.2325 23.75 19.4263V18.75C23.75 18.0588 23.1912 17.5 22.5 17.5H18.75Z" fill="black"/>
</svg>;
const GitHub = <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M22.5 0C10.0936 0 0 10.0936 0 22.5C0 34.9064 10.0936 45 22.5 45C34.9064 45 45 34.9064 45 22.5C45 10.0936 34.9064 0 22.5 0ZM22.5 3.375C33.0824 3.375 41.625 11.9176 41.625 22.5C41.625 31.1235 35.9516 38.3878 28.125 40.7834V35.0288C28.125 32.88 26.8867 31.0372 25.0972 30.1201C26.8372 29.7872 28.4529 29.1271 29.8102 28.1946C31.1675 27.2621 32.2272 26.0841 32.9013 24.7583C33.5755 23.4325 33.8447 21.9972 33.6866 20.5715C33.5285 19.1459 32.9476 17.7709 31.9922 16.5608C32.4912 15.0248 33.0486 12.3308 31.7241 10.2107C29.1705 10.2107 27.5228 11.9611 26.7363 13.0496C25.3919 12.6079 23.9533 12.3788 22.5 12.375C21.0457 12.3763 19.6056 12.6031 18.2593 13.043C17.4709 11.954 15.8245 10.2107 13.2759 10.2107C11.7559 12.6437 12.6955 15.2601 13.199 16.3279C12.179 17.5328 11.5394 18.9176 11.3351 20.3636C11.1307 21.8096 11.3677 23.2736 12.0258 24.6303C12.6838 25.9869 13.7432 27.1957 15.1132 28.153C16.4832 29.1103 18.1229 29.7875 19.8918 30.1267C18.4224 30.884 17.3219 32.2583 16.9849 33.9258H15.5061C14.047 33.9258 13.48 33.3329 12.6914 32.3328C11.9129 31.3326 11.0758 30.6606 10.0701 30.3816C9.52782 30.3242 9.16251 30.7367 9.63501 31.1023C11.2314 32.189 11.3416 33.9677 11.9817 35.1321C12.5644 36.1806 13.7584 37.125 15.1084 37.125H16.875V40.7834C9.04844 38.3878 3.375 31.1235 3.375 22.5C3.375 11.9176 11.9176 3.375 22.5 3.375Z" fill="black"/>
</svg>;
const Instagram = <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.6184 0C6.11809 0 0 6.11809 0 13.6184V31.3816C0 38.8809 6.11788 45 13.6184 45H31.3816C38.8811 45 45 38.8811 45 31.3816V13.6184C45 6.11788 38.8809 0 31.3816 0H13.6184ZM13.6184 3.55263H31.3816C36.9607 3.55263 41.4474 8.03817 41.4474 13.6184V31.3816C41.4474 36.9605 36.9605 41.4474 31.3816 41.4474H13.6184C8.03817 41.4474 3.55263 36.9607 3.55263 31.3816V13.6184C3.55263 8.03796 8.03796 3.55263 13.6184 3.55263ZM34.3421 8.28947C33.0336 8.28947 31.9737 9.34934 31.9737 10.6579C31.9737 11.9664 33.0336 13.0263 34.3421 13.0263C35.6507 13.0263 36.7105 11.9664 36.7105 10.6579C36.7105 9.34934 35.6507 8.28947 34.3421 8.28947ZM22.5 10.6579C15.9811 10.6579 10.6579 15.9811 10.6579 22.5C10.6579 29.0189 15.9811 34.3421 22.5 34.3421C29.0189 34.3421 34.3421 29.0189 34.3421 22.5C34.3421 15.9811 29.0189 10.6579 22.5 10.6579ZM22.5 14.2105C27.0985 14.2105 30.7895 17.9015 30.7895 22.5C30.7895 27.0985 27.0985 30.7895 22.5 30.7895C17.9015 30.7895 14.2105 27.0985 14.2105 22.5C14.2105 17.9015 17.9015 14.2105 22.5 14.2105Z" fill="black"/>
</svg>;
const WhatsApp = <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M22.5 0C10.0938 0 0 10.0938 0 22.5C0 26.1847 0.970546 29.6289 2.54443 32.6997L0.105469 41.4316C-0.462603 43.4605 1.54342 45.4664 3.57275 44.8989L12.3113 42.46C15.3796 44.0305 18.8187 45 22.5 45C34.9062 45 45 34.9062 45 22.5C45 10.0938 34.9062 0 22.5 0ZM22.5 3.375C33.0821 3.375 41.625 11.9179 41.625 22.5C41.625 33.0821 33.0821 41.625 22.5 41.625C19.1232 41.625 15.9644 40.7469 13.21 39.2124C12.8217 38.996 12.3637 38.9415 11.9355 39.0608L3.62549 41.3789L5.9458 33.0732C6.06567 32.6444 6.01117 32.1855 5.79419 31.7966C4.25661 29.0402 3.375 25.8801 3.375 22.5C3.375 11.9179 11.9179 3.375 22.5 3.375ZM14.8953 12.3772C14.5364 12.3772 13.9565 12.5118 13.4626 13.0496C12.9699 13.5851 11.5818 14.8838 11.5818 17.5276C11.5818 20.1713 13.5058 22.7245 13.7747 23.0845C14.0424 23.4411 17.4908 29.0413 22.9526 31.1946C27.4909 32.9833 28.4139 32.6271 29.3994 32.5371C30.3849 32.4494 32.5793 31.2394 33.0271 29.9839C33.4748 28.7284 33.4751 27.6545 33.3435 27.4329C33.2096 27.209 32.8507 27.0733 32.313 26.8044C31.7764 26.5356 29.1363 25.2365 28.6436 25.0576C28.1508 24.8787 27.7906 24.7879 27.4329 25.3257C27.0751 25.8634 26.0461 27.0729 25.7322 27.4307C25.4183 27.7907 25.1054 27.8358 24.5676 27.5669C24.0288 27.2958 22.2999 26.7298 20.2456 24.8994C18.6481 23.4763 17.5734 21.7172 17.2595 21.1794C16.9468 20.6439 17.2258 20.3496 17.4946 20.083C17.7365 19.8423 18.0322 19.4565 18.301 19.1426C18.5676 18.8287 18.6561 18.606 18.835 18.2483C19.0138 17.8917 18.9249 17.5767 18.791 17.3079C18.6571 17.039 17.6124 14.3808 17.1343 13.3176C16.7327 12.4244 16.3094 12.405 15.9258 12.3904C15.613 12.378 15.253 12.3772 14.8953 12.3772Z" fill="black"/>
</svg>;
const Twitter = <svg width="45" height="39" viewBox="0 0 45 39" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M31.0714 0C25.2521 0 20.5294 4.70215 20.4033 10.4923C15.2581 9.87523 11.9076 7.95152 9.85234 6.05601C7.57309 3.95392 6.85154 2.08633 6.85154 2.08633C6.7462 1.82091 6.57206 1.58835 6.34701 1.41257C6.12197 1.23679 5.85417 1.12414 5.57114 1.0862C5.28812 1.04827 5.00009 1.08642 4.73671 1.19673C4.47332 1.30705 4.24407 1.48554 4.07256 1.71385C4.07256 1.71385 2.14317 4.28566 2.14317 8.03562C2.14317 10.1795 2.82009 11.7658 3.62683 13.1102C3.59711 13.0963 3.39665 13.0265 3.39665 13.0265C3.1405 12.8986 2.85485 12.8414 2.56922 12.8609C2.28359 12.8804 2.00835 12.9759 1.77196 13.1374C1.53557 13.2989 1.34661 13.5206 1.22461 13.7796C1.10262 14.0386 1.05201 14.3255 1.07804 14.6106C1.07804 14.6106 1.69661 19.1321 5.94754 22.4369L5.5039 22.5479C5.26309 22.608 5.03947 22.723 4.85057 22.8841C4.66168 23.0451 4.51264 23.2476 4.41513 23.4759C4.31763 23.7041 4.27431 23.9519 4.28858 24.1997C4.30284 24.4475 4.3743 24.6886 4.49736 24.9041C4.49736 24.9041 5.21819 26.1235 6.72808 27.4069C7.6233 28.1678 8.93838 28.953 10.4885 29.6795C8.58481 30.3751 5.74615 31.071 1.60747 31.071C1.29863 31.071 0.99633 31.16 0.736721 31.3272C0.477112 31.4945 0.271192 31.733 0.143596 32.0143C0.0159995 32.2955 -0.0278698 32.6076 0.0172364 32.9131C0.0623426 33.2186 0.194514 33.5047 0.397939 33.737C0.397939 33.737 1.62603 35.0899 4.05373 36.267C6.48142 37.4441 10.2211 38.571 15.5359 38.571C24.8783 38.571 31.5907 34.0894 35.7798 28.4093C39.9689 22.7291 41.7855 15.9224 41.7855 10.7142C41.7855 10.3837 41.7649 10.0578 41.7353 9.73481C43.9973 7.5552 44.8462 5.91661 44.8868 5.83628C45.0904 5.42808 45.0145 4.93782 44.6985 4.61211C44.3835 4.28533 43.8952 4.1933 43.4806 4.38401L43.3069 4.46353C43.1579 4.5321 43.0091 4.60111 42.8591 4.66861C43.2951 3.97326 43.6392 3.23018 43.8782 2.46091C44.011 2.03663 43.8676 1.5717 43.5161 1.29742C43.1647 1.02313 42.6807 0.993771 42.3003 1.22627C40.9908 2.02215 39.7356 2.57931 38.429 2.95267C36.5062 1.12871 33.918 0 31.0714 0ZM31.0714 3.21425C35.2319 3.21425 38.5713 6.55366 38.5713 10.7142C38.5713 15.1486 36.9059 21.4668 33.1933 26.5008C29.4807 31.5348 23.8718 35.3567 15.5359 35.3567C11.5018 35.3567 8.8183 34.627 6.8076 33.8375C8.91381 33.5104 10.7273 33.0739 12.0307 32.5694C14.2911 31.6944 15.5108 30.6839 15.5108 30.6839C15.7345 30.4919 15.9011 30.2421 15.9923 29.9617C16.0836 29.6814 16.096 29.3813 16.0281 29.0944C15.9603 28.8075 15.8148 28.5448 15.6077 28.335C15.4006 28.1252 15.1397 27.9764 14.8537 27.9049C11.9365 27.1756 10.0656 25.9961 8.89184 25.0129L10.568 24.5944C10.8995 24.5117 11.196 24.3255 11.4145 24.0628C11.633 23.8002 11.7621 23.4747 11.7831 23.1337C11.8041 22.7927 11.7158 22.4539 11.5312 22.1664C11.3466 21.879 11.0752 21.6578 10.7563 21.535C7.27948 20.1978 5.81945 18.3066 5.07283 16.722C5.98136 16.9101 6.82729 17.1426 8.03596 17.1426C8.39789 17.1424 8.74913 17.0199 9.03281 16.7951C9.3165 16.5704 9.51601 16.2564 9.59905 15.9042C9.6821 15.5519 9.64382 15.1819 9.4904 14.8541C9.33698 14.5263 9.07742 14.2598 8.75373 14.0979C8.75373 14.0979 5.35742 12.5356 5.35742 8.03562C5.35742 7.22771 5.58118 6.71601 5.74455 6.10414C6.3051 6.85744 6.76706 7.58411 7.67185 8.41856C10.4304 10.9627 14.9898 13.5568 21.8786 13.9263C22.0965 13.9379 22.3146 13.905 22.5194 13.8296C22.7243 13.7542 22.9116 13.6379 23.07 13.4877C23.2285 13.3375 23.3546 13.1566 23.4408 12.9561C23.527 12.7556 23.5715 12.5396 23.5715 12.3213V10.7142C23.5715 6.55366 26.9109 3.21425 31.0714 3.21425Z" fill="black"/>
</svg>;
const YouTube = <svg width="45" height="33" viewBox="0 0 45 33" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M22.3541 0C15.8571 0 9.82056 0.462909 6.37605 1.18253C6.36871 1.18447 6.36139 1.18647 6.35408 1.18852C3.759 1.77002 1.31542 3.62887 0.801001 6.53985C0.80032 6.54384 0.799654 6.54783 0.799004 6.55183C0.403809 8.89798 0 11.9564 0 16.3636C0 20.7625 0.405194 23.7398 0.904872 26.2093C1.43189 29.0344 3.81908 30.9495 6.45395 31.5387C6.46656 31.5422 6.47921 31.5455 6.49191 31.5487C10.0868 32.257 15.9529 32.7272 22.45 32.7272C28.9471 32.7272 34.8163 32.257 38.4121 31.5487C38.4248 31.5455 38.4375 31.5422 38.4501 31.5387C41.0451 30.9572 43.4887 29.0983 44.0031 26.1874C44.0045 26.18 44.0059 26.1727 44.0071 26.1654C44.3963 23.7714 44.9005 20.7159 44.9999 16.3017C45 16.2904 45 16.279 44.9999 16.2677C44.9999 11.851 44.4944 8.77363 44.0011 6.3361C43.4783 3.50495 41.0884 1.58469 38.4501 0.99476C38.4098 0.985799 38.3691 0.978469 38.3282 0.972787C34.8201 0.479607 28.8522 0 22.3541 0ZM22.3541 3.06818C28.6545 3.06818 34.4926 3.54002 37.8069 4.00101C39.4358 4.37546 40.73 5.51315 40.9849 6.89341C40.9862 6.90207 40.9875 6.91073 40.9889 6.91937C41.4648 9.26803 41.9278 12.0606 41.9297 16.2457C41.8342 20.4443 41.3702 23.2615 40.9809 25.656C40.7151 27.1477 39.469 28.1601 37.7929 28.5404C34.5734 29.172 28.7816 29.659 22.45 29.659C16.1174 29.659 10.3271 29.1701 7.10914 28.5384C5.47415 28.1671 4.1747 27.026 3.91911 25.642C3.91719 25.6334 3.91519 25.6247 3.91312 25.6161C3.44252 23.2938 3.06818 20.5861 3.06818 16.3636C3.06818 12.1486 3.4419 9.32929 3.82124 7.07518C4.08554 5.57956 5.33499 4.56462 7.01525 4.18478C9.99639 3.56341 16.0158 3.06818 22.3541 3.06818ZM18.8805 7.69441C17.0472 7.7539 15.3409 9.23045 15.3409 11.236V20.4705C15.3409 23.1445 18.3747 24.8787 20.6982 23.5666V23.5646L28.87 18.9484C31.2103 17.6262 31.2103 14.0782 28.87 12.7561L20.6982 8.13985C20.1173 7.81184 19.4916 7.67458 18.8805 7.69441ZM18.8924 10.7186C18.9846 10.7236 19.0853 10.7525 19.1881 10.8105L27.3599 15.4288C27.7749 15.6632 27.7749 16.0433 27.3599 16.2777L19.1881 20.894C18.7768 21.1262 18.4091 20.9096 18.4091 20.4705V11.236C18.4091 11.0164 18.5012 10.8528 18.6448 10.7726C18.7165 10.7325 18.8003 10.7136 18.8924 10.7186Z" fill="black"/>
</svg>;
const Facebook = <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.875 0C3.10028 0 0 3.10028 0 6.875V38.125C0 41.8997 3.10028 45 6.875 45H38.125C41.8997 45 45 41.8997 45 38.125V6.875C45 3.10028 41.8997 0 38.125 0H6.875ZM6.875 3.75H38.125C39.8728 3.75 41.25 5.12722 41.25 6.875V38.125C41.25 39.8728 39.8728 41.25 38.125 41.25H30V28.75H34.5312C35.1613 28.75 35.694 28.2788 35.7715 27.6538L36.2402 23.9038C36.2852 23.5488 36.1726 23.1924 35.9351 22.9224C35.6988 22.6536 35.3587 22.5 35 22.5H30V18.125C30 16.7463 31.1213 15.625 32.5 15.625H35C35.69 15.625 36.25 15.0662 36.25 14.375V10.1562C36.25 9.50875 35.7561 8.96863 35.1123 8.91113C35.0386 8.90488 33.275 8.75 31.0425 8.75C25.5337 8.75 22.5 12.0202 22.5 17.959V22.5H17.5C16.81 22.5 16.25 23.0588 16.25 23.75V27.5C16.25 28.1912 16.81 28.75 17.5 28.75H22.5V41.25H6.875C5.12722 41.25 3.75 39.8728 3.75 38.125V6.875C3.75 5.12722 5.12722 3.75 6.875 3.75Z" fill="black"/>
</svg>;

const NavigationBar = ({className}) => {
    console.log("Render Navigation Bar");

    const sectionList = [
        ['About me', '#aboutme'],
        ['Skills', '#skills'],
        ['Education', '#education'],
        ['Big Projects', '#bigproject'],
        ['Vepdrak Studio', '#'],
        ['Blog Post', '#']
    ];
    const socialIconList = [
        [LinkedIn, "https://www.linkedin.com/in/asela-pasindu-dias-55a7a7210"],
        [GitHub, "https://github.com/aselapasinduD"],
        [Instagram, "https://www.instagram.com/asel_pasindu/"],
        [WhatsApp, "https://wa.me/message/LZH7ESTX73MWD1"],
        [Twitter, "https://twitter.com/Asela_Pasindu_D"],
        [YouTube, "https://www.youtube.com/@aselapasindu"],
        [Facebook, "https://web.facebook.com/AselPasindu"]
    ];

    // Get current width from list items to make dynamic bobl
    const navItemRef = useRef(null);
    const [currentWidth, getWith] = useState(0);
    const [elementWidth, getElementWidth] = useState(0);
    const [moveBobl, getMoveLocation] = useState(0);

    useEffect(() => {
        const handleResize = () => {
            getWith(navItemRef.current.offsetWidth);
        }
        handleResize();
        window.addEventListener('resize', handleResize);
        return () => {
            window.removeEventListener('resize', handleResize);
        }
    }, []);

    const handleMouseEnter = (event) => {
        const width = event.currentTarget.offsetWidth;
        const rect = event.currentTarget.getBoundingClientRect();
        getMoveLocation(rect.left - 120);
        getElementWidth(width);
    }

    // Create bobl using current width
    const [bobl, makeBobl] = useState(null);
    useEffect(() => {
        makeBobl(<span 
            className="bobl nav_animation absolute bg-[#4F4F4F]/60 h-[50px] ml-[6px] z-[-1] rounded-full" 
            style={{
                width: (elementWidth !== 0 ? elementWidth - 12: currentWidth - 12) + 'px',
                transform: 'translateX(' + moveBobl + 'px)'
            }}></span>);
    }, [elementWidth, moveBobl, currentWidth ]);


    return (
        <nav data-testid=" navigationBar " className={` NavigationBar relative flex rounded-full items-center z-[3] bg-[#FFFFFF]/80 ${className} `} >

            <ul className=" Sections-Nav flex contents ">
                {sectionList.map((section, index) => {
                    return (
                        <li key={index} id={`navItem-${index}`} className=" flex-1 w-max h-[60px] inline-grid items-center text-black" ref={navItemRef} onMouseEnter={handleMouseEnter}>
                                <a className="contents" href={section[1]}>{section[0]}</a>
                        </li>
                    );
                })}
            </ul>

            <span id="line-1" className=" bg-[#ff6600] w-1 h-12 mx-[5px] rounded-full "></span>

            <ul className=" Social-Icons flex contents ">
                {socialIconList.map((Icon, index) => {
                    return (
                        <li key={index} id={`icon-${index}`} className=" inline-grid items-center h-[60px] " onMouseEnter={handleMouseEnter}>
                            <a className="contents" href={Icon[1]}>{Icon[0]}</a>
                        </li>
                    );
                })}
            </ul>

            {bobl}
        </nav>
        
    );
}

export default NavigationBar;